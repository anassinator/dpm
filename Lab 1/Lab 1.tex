\documentclass[letterpaper,12pt]{article}
\begin{document}

\title{Lab 1. Wall Follower}
\date{\today}
\author{Anass Al-Wohoush and Malcolm William Watt \\ Team 42}
\maketitle

\section{Data Analysis}{Both the bang-bang and p-controllers kept the robot at a distance $bandCentre \pm (bandwidth + 3)$ cm from the wall where 3 cm depends on the set speed of the robot. This is to be expected because the robot simply keeps going straight no matter whether it’s parallel or not to the wall as long as it’s within the specified bandwidth. Hence, once it gets out of range and corrects itself, the robot turns accordingly but maintains a non-parallel angle. This oscillation will repeat all throughout the course. The bang-bang and p-controllers do however differ since the p-controller does attenuate the oscillation over time due to its proportional gain whereas the bang-bang controller’s fixed gain will cause a constant oscillation. The p-controller’s attenuation does however reset every time a turn is made.}

\section{Observations and Conclusion}{Overall, the ultrasonic sensor was quite responsive and reliable. Moreover, it does not seem to be affected by electrical noise by the non-noticeable fluctuations of the data. This leads us to believe the sensor has an internal filter. Digging into the source, \textbf{lejos.nxt.UltrasonicSensor.java} shows that the \textbf{getDistance()} method issued pulling data from a registry which is rewritten to every 30 ms when the sensor is set to continuous mode. A deeper look into the documentation shows that a ping captures up to 8 echoes. This entails that the sensor must indeed be doing all the math onboard on a hardware level as well as implementing some type of filter in order to filter the echoes. This makes sense since the Mindstorms kit is intended for a young audience who would not expect be expected to worry about filters. This also justifies the 37.99\$ price tag a bit.

Moreover, we have experimentally concluded that the sensor does not produce false positives when facing a single direction. Rotating the sensor however is another story. Even with timers, the sensor may read data as the sensor is rotating and hence have the robot believe that the wall is far away from it when it is indeed nearby. This can be filtered by stopping the readings when rotating, but we opted for a more elegant and simple solution. By permanently setting the sensor at $45^{\circ}$, we do not only solve this problem, but lower costs by removing a motor and limit the possibility of breaking by having less moving parts. $45^{\circ}$ is also convenient since its $\sin{}$ and $\cos{}$ are equivalent and hence allows for some simplification in the logic of the code. All we need to do is take the factor of $\cos{45^{\circ}}$ into account when dealing with the distances. This has the effect of limiting our range down to $255 \times \cos{45^{\circ}} \approx 180 cm$ but this is sufficient for our needs. We opted for an approximated hardcoded value for $\cos{45^{\circ}}$ of $0.7071$ to limit the amount of calculations involved.

On the other hand, the sensor may fail to detect objects. Such false negatives are to be expected however once we take a look at the source code. The \textbf{getDistance()} method waits for the register to be rewritten to every time to avoid rereading the same data several times. This 30 ms delay paired with the 10 ms delay the ultrasonic sensor poller is set to sleep after every reading make up for a small yet noticeable window where the robot is essentially blind. This could pose a threat, but instead of trying to fix it, we opted to take advantage of it. By speeding up our robot appropriately, this window is sufficient to neglect gaps in the walls as long as the gap is approximately at most three times the distance the robot could travel about a second at 720 degrees per second. This is enough for our purpose since a gap any larger and it should no longer be considered a gap, but rather a hallway. The gap size should have been clarified.

In essence, we need not filter the sensor’s data in any way, but either found hardware workarounds or a way to take advantage of it.}

\section{Further Improvements}{As we worked on our robot, a few ideas came to mind as to how some of the errors from our wall following robot could be improved. We picked out four elements that we think could have be improved and thought of four solutions to these issues. Not all are necessarily implementable in the case of the Lego Mindstorms but nevertheless would be significant improvements upon the current robot.

The first major improvement would be an improvement to the ‘intelligence’ of the robot. The robot as it stands knows only how far it is away from a wall. One way to make the robot more aware of its dynamic motion through the room would be through the implementation of a PID control system. So to break it down, the p is for position, the ‘I’ is for integrating, and d is for differentiating. So what exactly is PID? It allows the robot to know not only it’s position with respect to the wall, but its speed (through the derivative) and by integrating it can detect its past error and even give an average error. This would be useful because if the robot knew it’s speed with respect to the wall and therefore when in the band which is the desired zone it would simply require a speed in the lateral direction of zero which would be easy to implement using the differentiating aspect of the PID control method. Also the integrating factor could help the robot determine the type of turn it is approaching and also help ignore gaps in the wall. For example if the robot comes upon a gap, then the proportional distance may be off, but since the integrating has a very steady average it will wait and take a few more data points before turning, then when it notices that the wall comes back it will have effectively avoided the gap.

Another improvement that we had trouble with because of imperfections in the sensors was a rotating camera. This would reduce the amount of blind spots in the robots vision and make for a better data collection set. Also it would reduce the possibility of objects sneaking past the field of sense of the ultrasonic sensor especially from the right side. Ultimately the use of a rotating camera would ideally create fewer running into wall errors, but because of the false positives detected during the rotation of the camera (due to the limitations of the hardware) it was not very advantageous to apply in this particular situation. In general however, the use of a rotating camera holds the brilliant advantage of extending the field of vision. Another aspect of improvement that this particular solution absorbs is that when the ultrasonic sensor is oriented at too sharp of an angle to the wall the readings are affected by the angle of incidence of the wave. Since the wave hits the wall at an angle, the wave can partially or fully bounce away from the sensor and not be picked up and therefore the robot fails to see an obstacle in its course.

This next improvement is actually a hack way of replacing the PID control and allow for a more parallel path to the wall. Basically the concept involves using another sensor mounted on the back left side of the wall follower. The reason for this is that through the analysis of the difference between the front and back sensor reading one can determine the orientation of the robot with respect to the wall. From there it becomes as simple as creating a new algorithm for the motors that takes both of the Ultrasonic sensor readings into account. The basic idea being that if the back sensor is farther from the wall than the front sensor the robot knows it needs to adjust its speed and turn slightly to the right to remain parallel with the wall. This method is not always easy to implicate because the frequencies of the ultrasonic pings can sometimes be similar and cause the sensors to read strange values even when they are functioning correctly.

In conclusion the main areas of improvement would be robot intelligence, field of vision (also the error caused by a sharp incident angle) and the robots awareness of its orientation. The solutions we suggest are respectively the implementation of a PID control system, a rotating camera which looks both in the perpendicular direction to the wall and straight in front of it, and by adding another ultrasonic sensor to create a new algorithm which allows the robots to vary its speed not only based on its speed but its orientation as well.}

\end{document}